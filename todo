fix the case when the board is flipped (i.e, black is at bottom) 